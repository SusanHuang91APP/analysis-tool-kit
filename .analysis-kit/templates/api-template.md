# __NAME__ - API Endpoint Analysis

> **ğŸ¯ åˆ†æå“è³ª**ï¼šâ­ åŸºç¤æ¡†æ¶ (0%)  
> **ğŸ“… é–‹å§‹æ—¥æœŸ**ï¼š__CURRENT_DATE__  
> **ğŸ“… æœ€å¾Œæ›´æ–°**ï¼š__CURRENT_DATE__  
> **ğŸ“Š åˆ†æéšæ®µ**ï¼šğŸ“ å¾…åˆ†æ  
> **ğŸ”— ç›¸é—œæ–‡ä»¶**ï¼š[é€£çµåˆ° overview.md](./overview.md)

---

## 1. ğŸ“ æ ¸å¿ƒæ‘˜è¦èˆ‡ä¾è³´ (Core Summary & Dependencies)

### 1.1 ğŸ“‚ åˆ†ææª”æ¡ˆè³‡è¨Š (Analyzed Files)

| æª”æ¡ˆè·¯å¾‘ |
|---------|
| [å¾…è£œå……ï¼šè¢«åˆ†æçš„åŸå§‹æª”æ¡ˆå®Œæ•´è·¯å¾‘] |

### 1.2 ğŸ“¦ ä¾è³´é—œä¿‚ (Dependencies)

**å¾Œç«¯ä¾è³´ï¼š**

| é¡å‹ | åç¨± | ç”¨é€” | æª”æ¡ˆé€£çµ |
|------|------|------|----------|
| Service | [æœå‹™åç¨±] | [æœå‹™ç”¨é€”] | [åˆ†ææ–‡ä»¶é€£çµ] |
| Repository | [Repositoryåç¨±] | [è³‡æ–™å­˜å–ç”¨é€”] | [åˆ†ææ–‡ä»¶é€£çµ] |
| Helper | [å·¥å…·åç¨±] | [å·¥å…·ç”¨é€”] | [åˆ†ææ–‡ä»¶é€£çµ] |

**å‰ç«¯ä¾è³´ï¼š**

| é¡å‹ | åç¨± | ç”¨é€” | æª”æ¡ˆé€£çµ |
|------|------|------|----------|
| Helper | [å·¥å…·åç¨±] | [å‰ç«¯å·¥å…·ç”¨é€”] | [åˆ†ææ–‡ä»¶é€£çµ] |
| Type | [å‹åˆ¥å®šç¾©] | [TypeScript å‹åˆ¥] | [åˆ†ææ–‡ä»¶é€£çµ] |

**èªªæ˜ï¼š** æ­¤è¡¨æ ¼è¿½è¹¤æœ¬ API ç«¯é»åœ¨å‰å¾Œç«¯çš„æ‰€æœ‰ä¾è³´ã€‚

---

## 2. ğŸ“‹ åˆ†ææŒ‡å¼• (Analysis Guidelines)

**æ­¤æ–‡ä»¶çš„åˆ†æç›®æ¨™ï¼š**

æœ¬æ–‡ä»¶ç”¨æ–¼åˆ†æ**API ç«¯é»çš„å®Œæ•´è¦æ ¼èˆ‡å¯¦ä½œ**ï¼Œé‡é»åœ¨æ–¼ï¼š

1. **API è¦æ ¼**ï¼šå®šç¾© HTTP Methodã€è·¯ç”±ã€è«‹æ±‚/å›æ‡‰æ ¼å¼ã€ç‹€æ…‹ç¢¼
2. **å¾Œç«¯å¯¦ä½œ**ï¼šåˆ†æ Controller â†’ Service â†’ Repository çš„æ¥­å‹™é‚è¼¯éˆè·¯
3. **å‰ç«¯èª¿ç”¨**ï¼šè¨˜éŒ„å‰ç«¯å¦‚ä½•å°è£å’Œèª¿ç”¨æ­¤ APIï¼ˆService å±¤ï¼‰
4. **ä¾è³´è¿½è¹¤**ï¼šè¿½è¹¤å¾Œç«¯å’Œå‰ç«¯çš„æ‰€æœ‰ä¾è³´ï¼Œå»ºç«‹å®Œæ•´çš„ä¾è³´é—œä¿‚è¡¨
5. **æ•ˆèƒ½èˆ‡å®‰å…¨**ï¼šè©•ä¼°å¿«å–ç­–ç•¥ã€è³‡æ–™åº«å„ªåŒ–ã€å®‰å…¨é˜²è­·æªæ–½

**AI Agent æ³¨æ„äº‹é …ï¼š**
- æ­¤ç‚º API ç«¯é»åˆ†æï¼Œæ¶µè“‹å¾Œç«¯å¯¦ä½œå’Œå‰ç«¯èª¿ç”¨å…©å€‹å±¤é¢
- è«‹æ±‚/å›æ‡‰è¦æ ¼å¿…é ˆè©³ç´°ï¼ŒåŒ…å«æ‰€æœ‰åƒæ•¸ã€æ¬„ä½èªªæ˜ã€ç¯„ä¾‹
- å¿…é ˆç”¨æµç¨‹åœ–å±•ç¤ºå¾æ¥æ”¶è«‹æ±‚åˆ°è¿”å›å›æ‡‰çš„å®Œæ•´é‚è¼¯ï¼ŒåŒ…å«éŒ¯èª¤è™•ç†åˆ†æ”¯
- å¾Œç«¯ä¾è³´å’Œå‰ç«¯ä¾è³´è¦åˆ†é–‹åˆ—è¡¨
- é‡é»é—œæ³¨å®‰å…¨æ€§ï¼ˆæˆæ¬Šã€è¼¸å…¥é©—è­‰ã€æ³¨å…¥é˜²è­·ï¼‰å’Œæ•ˆèƒ½ï¼ˆå¿«å–ã€æŸ¥è©¢å„ªåŒ–ï¼‰
- **å¿…é ˆè¿½è¹¤ Controller çš„ä¾è³´æ³¨å…¥ï¼Œä¸¦åœ¨ä¾è³´é—œä¿‚è¡¨ä¸­è©³è¿°æ¯å€‹ä¾è³´çš„ç”¨é€”ã€‚**
- **å¿…é ˆé™„ä¸Šé—œéµæ¥­å‹™é‚è¼¯çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œä¸¦é€è¡Œè¨»è§£èªªæ˜ã€‚**
- **è³‡æ–™æµåˆ†æéœ€åŒ…å«å¾ DTO åˆ° Modelï¼Œå†åˆ° ViewModel çš„å®Œæ•´è½‰æ›éç¨‹ã€‚**

---

## 3. å¾Œç«¯è¦æ ¼èˆ‡å¯¦ä½œ (Backend Specification & Implementation)

### 3.1 API åŸºæœ¬è³‡è¨Š (API Basic Information)

#### 3.1.1 ç«¯é»å®šç¾©

**åŸºæœ¬è³‡è¨Šï¼š**
- **HTTP Method**ï¼šGET / POST / PUT / PATCH / DELETE
- **ç«¯é»è·¯å¾‘**ï¼š`/api/resource/{id}`
- **API ç‰ˆæœ¬**ï¼šv1 / v2
- **å›æ‡‰æ ¼å¼**ï¼šJSON / XML

---

#### 3.1.2 èªè­‰æˆæ¬Š

**èªè­‰æ–¹å¼ï¼š**
- [ ] Bearer Token
- [ ] API Key
- [ ] OAuth 2.0
- [ ] Basic Auth
- [ ] Cookie Session

**æˆæ¬Šè¦æ±‚ï¼š**
- **æ¬Šé™**ï¼š[å¾…è£œå……ï¼šæ‰€éœ€æ¬Šé™]
- **è§’è‰²**ï¼š[å¾…è£œå……ï¼šå…è¨±çš„è§’è‰²]

---

### 3.2 è«‹æ±‚è¦æ ¼ (Request Specification)

#### 3.2.1 è·¯å¾‘åƒæ•¸ (Path Parameters)

| åƒæ•¸åç¨± | é¡å‹ | å¿…éœ€ | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|------|------|
| `id` | integer | æ˜¯ | [å¾…è£œå……ï¼šèªªæ˜] | `12345` |

---

#### 3.2.2 æŸ¥è©¢åƒæ•¸ (Query Parameters)

| åƒæ•¸åç¨± | é¡å‹ | å¿…éœ€ | é è¨­å€¼ | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|--------|------|------|
| `page` | integer | å¦ | `1` | [å¾…è£œå……ï¼šé ç¢¼] | `1` |
| `limit` | integer | å¦ | `10` | [å¾…è£œå……ï¼šæ¯é ç­†æ•¸] | `20` |
| `sort` | string | å¦ | `id` | [å¾…è£œå……ï¼šæ’åºæ¬„ä½] | `createdAt` |

---

#### 3.2.3 è«‹æ±‚ä¸»é«” (Request Body)

**Content-Type**: `application/json`

**è³‡æ–™çµæ§‹ï¼š**
```typescript
interface RequestBody {
    // [å¾…è£œå……ï¼šè«‹æ±‚ä¸»é«”çµæ§‹]
    field1: string;
    field2: number;
    field3?: boolean;
}
```

**æ¬„ä½èªªæ˜ï¼š**
- `field1` - [å¿…éœ€] [å¾…è£œå……ï¼šæ¬„ä½èªªæ˜]
- `field2` - [å¿…éœ€] [å¾…è£œå……ï¼šæ¬„ä½èªªæ˜]
- `field3` - [å¯é¸] [å¾…è£œå……ï¼šæ¬„ä½èªªæ˜]

**ç¯„ä¾‹ï¼š**
```json
{
    "field1": "value",
    "field2": 123,
    "field3": true
}
```

---

#### 3.2.4 è«‹æ±‚æ¨™é ­ (Request Headers)

| æ¨™é ­åç¨± | å¿…éœ€ | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|------|
| `Authorization` | æ˜¯ | æˆæ¬Š Token | `Bearer eyJhbGc...` |
| `Content-Type` | æ˜¯ | å…§å®¹é¡å‹ | `application/json` |
| `Accept` | å¦ | æ¥å—æ ¼å¼ | `application/json` |

---

### 3.3 å›æ‡‰è¦æ ¼ (Response Specification)

#### 3.3.1 æˆåŠŸå›æ‡‰ (Success Response)

**HTTP ç‹€æ…‹ç¢¼ï¼š** `200 OK` / `201 Created` / `204 No Content`

**å›æ‡‰çµæ§‹ï¼š**
```typescript
interface SuccessResponse {
    // [å¾…è£œå……ï¼šæˆåŠŸå›æ‡‰çµæ§‹]
    success: boolean;
    data: {
        // è³‡æ–™å…§å®¹
    };
    message?: string;
}
```

**ç¯„ä¾‹ï¼š**
```json
{
    "success": true,
    "data": {
        "id": 12345,
        "name": "ç¯„ä¾‹è³‡æ–™"
    },
    "message": "æ“ä½œæˆåŠŸ"
}
```

---

#### 3.3.2 éŒ¯èª¤å›æ‡‰ (Error Response)

**HTTP ç‹€æ…‹ç¢¼èˆ‡èªªæ˜ï¼š**

| ç‹€æ…‹ç¢¼ | èªªæ˜ | æƒ…å¢ƒ |
|--------|------|------|
| `400` | Bad Request | åƒæ•¸æ ¼å¼éŒ¯èª¤æˆ–ç¼ºå°‘å¿…è¦åƒæ•¸ |
| `401` | Unauthorized | æœªç™»å…¥æˆ– Token éæœŸ |
| `403` | Forbidden | ç„¡æ¬Šé™å­˜å–æ­¤è³‡æº |
| `404` | Not Found | è³‡æºä¸å­˜åœ¨ |
| `409` | Conflict | è³‡æºè¡çªï¼ˆä¾‹å¦‚ï¼šé‡è¤‡å»ºç«‹ï¼‰ |
| `422` | Unprocessable Entity | æ¥­å‹™é‚è¼¯é©—è­‰å¤±æ•— |
| `500` | Internal Server Error | ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤ |

**éŒ¯èª¤å›æ‡‰çµæ§‹ï¼š**
```typescript
interface ErrorResponse {
    success: false;
    error: {
        code: string;
        message: string;
        details?: any;
    };
}
```

**ç¯„ä¾‹ï¼š**
```json
{
    "success": false,
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "æ¬„ä½é©—è­‰å¤±æ•—",
        "details": {
            "field1": "æ­¤æ¬„ä½ç‚ºå¿…å¡«"
        }
    }
}
```

---

#### 3.3.3 å›æ‡‰æ¨™é ­ (Response Headers)

| æ¨™é ­åç¨± | èªªæ˜ | ç¯„ä¾‹ |
|---------|------|------|
| `Content-Type` | å…§å®¹é¡å‹ | `application/json` |
| `X-Total-Count` | ç¸½ç­†æ•¸ï¼ˆåˆ†é ï¼‰ | `150` |
| `X-Page-Count` | ç¸½é æ•¸ï¼ˆåˆ†é ï¼‰ | `15` |

---

### 3.4 æ¥­å‹™é‚è¼¯ (Business Logic)

#### 3.4.0 æ ¸å¿ƒ Controller æ–¹æ³• (Core Controller Method)
**ç¨‹å¼ç¢¼ç‰‡æ®µï¼š**
```csharp
// [å¾…è£œå……ï¼šè²¼ä¸Š Controller Action çš„å®Œæ•´ç¨‹å¼ç¢¼]
[HttpGet("{id}")]
public async Task<IActionResult> GetById(int id)
{
    // ...
}
```

#### 3.4.1 æ ¸å¿ƒæµç¨‹ (Core Flow)
[å¾…è£œå……ï¼šæ­¤æ–¹æ³•çš„ä¸»è¦æ¥­å‹™é‚è¼¯æ­¥é©Ÿï¼Œä½¿ç”¨æµç¨‹åœ–æˆ–ç·¨è™Ÿåˆ—è¡¨]

**åŸ·è¡Œæ­¥é©Ÿ**ï¼š
1. [å¾…è£œå……ï¼šç¬¬ä¸€æ­¥]
2. [å¾…è£œå……ï¼šç¬¬äºŒæ­¥]
3. [å¾…è£œå……ï¼šç¬¬ä¸‰æ­¥]

**æµç¨‹åœ–**ï¼ˆMermaidï¼‰ï¼š
```mermaid
graph TD
    A[é–‹å§‹] --> B[æ­¥é©Ÿ1: åƒæ•¸é©—è­‰]
    B --> C[æ­¥é©Ÿ2: å¿«å–æª¢æŸ¥]
    C --> D{å¿«å–å‘½ä¸­?}
    D -->|æ˜¯| E[è¿”å›å¿«å–è³‡æ–™]
    D -->|å¦| F[æ­¥é©Ÿ3: æŸ¥è©¢è³‡æ–™åº«]
    F --> G[æ­¥é©Ÿ4: è³‡æ–™è™•ç†]
    G --> H[æ­¥é©Ÿ5: å¯«å…¥å¿«å–]
    H --> I[è¿”å›çµæœ]
    E --> I
```

---

#### 3.4.2 è³‡æ–™å­˜å–å±¤èª¿ç”¨ (Data Access Layer Calls)
[å¾…è£œå……ï¼šæ­¤æ–¹æ³•èª¿ç”¨çš„æ‰€æœ‰ Repository æˆ– DAL æ–¹æ³•]

| Repository | æ–¹æ³•åç¨± | ç”¨é€” | æŸ¥è©¢æ¢ä»¶ | å›å‚³å€¼ |
|-----------|---------|------|---------|--------|
| [Repositoryå] | [æ–¹æ³•å] | [ç”¨é€”èªªæ˜] | [æŸ¥è©¢æ¢ä»¶] | [å›å‚³å‹åˆ¥] |

**ç¯„ä¾‹**ï¼š
```csharp
// å–å¾—å•†å“é è³‡æ–™
var salePageData = _salePageRepository.GetSalePageById(salePageId);

// å–å¾—SKUè³‡è¨Š
var skuList = _salePageRepository.GetSaleProductSKUBySKUIds(shopId, skuIds);
```

---

#### 3.4.3 å…¶ä»–æœå‹™èª¿ç”¨ (Service Calls)
[å¾…è£œå……ï¼šæ­¤æ–¹æ³•èª¿ç”¨çš„å…¶ä»– Service æ–¹æ³•]

| æœå‹™åç¨± | æ–¹æ³•åç¨± | ç”¨é€” | åƒæ•¸ | å›å‚³å€¼ |
|---------|---------|------|------|--------|
| [æœå‹™å] | [æ–¹æ³•å] | [ç”¨é€”èªªæ˜] | [åƒæ•¸åˆ—è¡¨] | [å›å‚³å‹åˆ¥] |

**ç¯„ä¾‹**ï¼š
```csharp
// å–å¾—å¤šèªç³»å…§å®¹
var multilingualData = _multilingualService.GetList<SalePageMultilingualEntity>(
    MultilingualModuleTypeEnum.SalePage,
    salePageIds,
    shopId,
    language
);

// å–å¾—å•†åº—é è¨­è¨­å®š
var shopDefault = _shopDefaultService.GetShopDefaultValue(
    shopId,
    ShopDefaultGroupTypeDefEnum.SalePage,
    ShopDefaultKeyEnum.EnableIsComingSoon,
    true
);
```

---

#### 3.4.4 è³‡æ–™è™•ç†èˆ‡è½‰æ› (Data Processing & Transformation)
[å¾…è£œå……ï¼šè³‡æ–™é©—è­‰ã€è½‰æ›ã€æ˜ å°„é‚è¼¯]

**è³‡æ–™é©—è­‰**ï¼š
- [å¾…è£œå……ï¼šè¼¸å…¥é©—è­‰è¦å‰‡]
- [å¾…è£œå……ï¼šæ¥­å‹™è¦å‰‡é©—è­‰]

**è³‡æ–™è½‰æ›**ï¼š
```csharp
// [å¾…è£œå……ï¼šè³‡æ–™æ˜ å°„ã€æ ¼å¼è½‰æ›ç¯„ä¾‹]
var entity = Mapper.Map<TargetEntity>(sourceEntity);
```

**è³‡æ–™èšåˆ**ï¼š
- [å¾…è£œå……ï¼šå¦‚ä½•çµ„åˆå¤šå€‹ä¾†æºçš„è³‡æ–™]

---

### 3.5 è³‡æ–™æ¨¡å‹è½‰æ› (Data Model Transformation)

### 3.5.1 è«‹æ±‚æ¨¡å‹ (Request DTO) -> æ¥­å‹™æ¨¡å‹ (Business Model)
**è½‰æ›é‚è¼¯ï¼š**
[å¾…è£œå……ï¼šæè¿°å¾ Request DTO å¦‚ä½•è½‰æ›/æ˜ å°„åˆ°å¾Œç«¯å…§éƒ¨ä½¿ç”¨çš„æ¥­å‹™æ¨¡å‹æˆ–å¯¦é«”]

**ç¨‹å¼ç¢¼ç¯„ä¾‹ (e.g., AutoMapper / Manual Mapping)ï¼š**
```csharp
// [å¾…è£œå……ï¼šDTO åˆ° Model çš„è½‰æ›ç¨‹å¼ç¢¼]
var businessModel = _mapper.Map<BusinessModel>(requestDto);
```

### 3.5.2 æ¥­å‹™æ¨¡å‹ (Business Model) -> å›æ‡‰æ¨¡å‹ (Response DTO)
**è½‰æ›é‚è¼¯ï¼š**
[å¾…è£œå……ï¼šæè¿°å¾æ¥­å‹™æ¨¡å‹å¦‚ä½•è½‰æ›/æ˜ å°„åˆ°æœ€çµ‚çš„ Response DTO]

**ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š**
```csharp
// [å¾…è£œå……ï¼šModel åˆ° DTO çš„è½‰æ›ç¨‹å¼ç¢¼]
var responseDto = _mapper.Map<ResponseDto>(resultModel);
```

---

### 3.6 å¿«å–ç­–ç•¥åˆ†æ (Caching Strategy Analysis)

#### 3.6.1 å¿«å–æ©Ÿåˆ¶ (Cache Mechanism)
[å¾…è£œå……ï¼šæ­¤æ–¹æ³•çš„å¿«å–ç­–ç•¥]

**å¿«å–é¡å‹**ï¼š
- [ ] Memory Cache (è¨˜æ†¶é«”å¿«å–)
- [ ] Redis Cache (åˆ†æ•£å¼å¿«å–)
- [ ] ç„¡å¿«å–

**å¿«å–è¨­å®š**ï¼š
```csharp
// [å¾…è£œå……ï¼šå¿«å–ç›¸é—œç¨‹å¼ç¢¼]
var cacheKeyEntity = this.GetCacheKey("TypeName", new string[] { key1, key2 });
var result = this.DataCacheService.GetRedisCacheData<T>(
    cacheKeyEntity.ServiceName,
    cacheKeyEntity.TypeName,
    cacheKeyEntity.Key,
    () => {
        // å¿«å–æœªå‘½ä¸­æ™‚çš„è™•ç†é‚è¼¯
        return fetchData();
    },
    expirationSeconds: 900, // 15 åˆ†é˜
    enableCache: true,
    cleanCache: false
);
```

**å¿«å–ç­–ç•¥**ï¼š
- **å¿«å– Key æ ¼å¼**ï¼š[å¾…è£œå……]
- **éæœŸæ™‚é–“**ï¼š[å¾…è£œå……ï¼šç§’æ•¸]
- **æ›´æ–°ç­–ç•¥**ï¼š[å¾…è£œå……ï¼šä¸»å‹•æ›´æ–° / è¢«å‹•å¤±æ•ˆ]
- **å¿«å–ç©¿é€é˜²è­·**ï¼š[å¾…è£œå……ï¼šæ˜¯å¦æœ‰é˜²è­·æ©Ÿåˆ¶]

---

#### 3.6.2 å¿«å– Key ç®¡ç† (Cache Key Management)
[å¾…è£œå……ï¼šå¿«å– Key çš„ç”Ÿæˆèˆ‡ç®¡ç†é‚è¼¯]

**CacheKey çµæ§‹**ï¼š
```
ServiceName:TypeName-Version:Key
ä¾‹å¦‚ï¼šSalePageV2:SalePageV2ProcessContext-2023121401:100-12345-secret-Web-0
```

**ç‰ˆæœ¬æ§åˆ¶**ï¼š
- [å¾…è£œå……ï¼šå¦‚ä½•ç®¡ç†å¿«å–ç‰ˆæœ¬]

---

## 4. å‰ç«¯èª¿ç”¨å°è£ (Frontend Integration)

### 4.1 Service é¡åˆ¥å°è£

**å‰ç«¯æœå‹™å°è£ï¼š**
```typescript
class ApiService {
    // [å¾…è£œå……ï¼šå°è£æ­¤ API çš„å‰ç«¯ Service é¡åˆ¥]
    
    /**
     * èª¿ç”¨æ­¤ API
     * @param data - è«‹æ±‚è³‡æ–™
     * @returns Promise<Response>
     */
    public async callApi(data: RequestType): Promise<ResponseType> {
        try {
            const response = await fetch('/api/endpoint', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.getToken()}`
                },
                body: JSON.stringify(data)
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            return await response.json();
        } catch (error) {
            this.handleError(error);
            throw error;
        }
    }
}
```

---

### 4.2 éŒ¯èª¤è™•ç†å°è£

**å‰ç«¯éŒ¯èª¤è™•ç†ï¼š**
```typescript
private handleError(error: Error): void {
    if (error.message.includes('401')) {
        // å°å‘ç™»å…¥é 
        router.push('/login');
    } else if (error.message.includes('403')) {
        // é¡¯ç¤ºæ¬Šé™éŒ¯èª¤
        showNotification('ç„¡æ¬Šé™å­˜å–', 'error');
    } else {
        // ä¸€èˆ¬éŒ¯èª¤è™•ç†
        showNotification(error.message, 'error');
    }
    
    // è¨˜éŒ„éŒ¯èª¤
    logger.error('API Error:', error);
}
```

**éŒ¯èª¤è™•ç†æµç¨‹ï¼š**
```mermaid
graph TD
    A[API èª¿ç”¨å¤±æ•—] --> B{éŒ¯èª¤é¡å‹}
    B -->|401| C[æ¸…é™¤ Token]
    C --> D[å°å‘ç™»å…¥]
    B -->|403| E[é¡¯ç¤ºæ¬Šé™éŒ¯èª¤]
    B -->|422| F[é¡¯ç¤ºé©—è­‰éŒ¯èª¤]
    B -->|500| G[é¡¯ç¤ºç³»çµ±éŒ¯èª¤]
    B -->|ç¶²è·¯éŒ¯èª¤| H[é‡è©¦æ©Ÿåˆ¶]
```

---

### 4.3 å¿«å–èˆ‡å„ªåŒ–

**å¿«å–ç­–ç•¥ï¼š**
```typescript
// ç°¡å–®çš„å¿«å–å¯¦ä½œ
private cache = new Map<string, CacheEntry>();

public async getWithCache(key: string): Promise<Data> {
    // æª¢æŸ¥å¿«å–
    const cached = this.cache.get(key);
    if (cached && Date.now() - cached.timestamp < 5 * 60 * 1000) {
        return cached.data;
    }
    
    // èª¿ç”¨ API
    const data = await this.callApi(key);
    this.cache.set(key, { data, timestamp: Date.now() });
    return data;
}
```

**å„ªåŒ–å»ºè­°ï¼š**
- [ ] å¯¦ä½œè«‹æ±‚å»é‡ï¼ˆé¿å…é‡è¤‡è«‹æ±‚ï¼‰
- [ ] å¯¦ä½œè«‹æ±‚å–æ¶ˆï¼ˆAbortControllerï¼‰
- [ ] å¯¦ä½œé‡è©¦æ©Ÿåˆ¶ï¼ˆæŒ‡æ•¸é€€é¿ï¼‰

---

## 5. ç¯„ä¾‹èˆ‡æ¸¬è©¦ (Examples & Testing)

### 5.1 è«‹æ±‚ç¯„ä¾‹

**cURL ç¯„ä¾‹ï¼š**
```bash
curl -X POST "https://api.example.com/api/resource" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field1": "value",
    "field2": 123
  }'
```

**JavaScript/Fetch ç¯„ä¾‹ï¼š**
```javascript
const response = await fetch('https://api.example.com/api/resource', {
    method: 'POST',
    headers: {
        'Authorization': 'Bearer YOUR_TOKEN',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        field1: 'value',
        field2: 123
    })
});
const data = await response.json();
```

---

### 5.2 æ¸¬è©¦æ¡ˆä¾‹

**æ­£å¸¸æµç¨‹æ¸¬è©¦ï¼š**
1. **æ¡ˆä¾‹1**ï¼š[æ­£å¸¸æ“ä½œ]
   - è«‹æ±‚ï¼š[å¾…è£œå……]
   - é æœŸå›æ‡‰ï¼š[å¾…è£œå……]

**ç•°å¸¸æµç¨‹æ¸¬è©¦ï¼š**
1. **æ¡ˆä¾‹1**ï¼šç¼ºå°‘å¿…è¦åƒæ•¸
   - è«‹æ±‚ï¼š[å¾…è£œå……]
   - é æœŸå›æ‡‰ï¼š400 Bad Request

2. **æ¡ˆä¾‹2**ï¼šæœªæˆæ¬Šå­˜å–
   - è«‹æ±‚ï¼š[å¾…è£œå……]
   - é æœŸå›æ‡‰ï¼š401 Unauthorized

---

## 6. æ¶æ§‹èˆ‡å“è³ªåˆ†æ (Architecture & Quality Analysis)

### 6.1 æ•ˆèƒ½è€ƒé‡

**æ•ˆèƒ½æª¢æŸ¥æ¸…å–®ï¼š**
- [ ] **è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–**ï¼šæ˜¯å¦æœ‰ N+1 æŸ¥è©¢å•é¡Œï¼Ÿæ˜¯å¦å·²å»ºç«‹é©ç•¶ç´¢å¼•ï¼Ÿ
- [ ] **å¿«å–ç­–ç•¥**ï¼šæ˜¯å¦å°å¸¸ç”¨è³‡æ–™æˆ–é«˜æˆæœ¬è¨ˆç®—çµæœä½¿ç”¨å¿«å–ï¼ˆRedis/Memory Cacheï¼‰ï¼Ÿ
- [ ] **åˆ†é å¯¦ä½œ**ï¼šé‡å°å¤§é‡è³‡æ–™è¿”å›çš„ç«¯é»ï¼Œæ˜¯å¦å·²å¯¦ä½œåˆ†é ï¼Ÿ
- [ ] **éåŒæ­¥è™•ç†**ï¼šæ˜¯å¦æœ‰é•·æ™‚é–“åŸ·è¡Œçš„æ“ä½œï¼Ÿæ˜¯å¦å·²æ”¹ç‚ºéåŒæ­¥è™•ç†ä»¥é¿å…é˜»å¡ï¼Ÿ
- [ ] **å›æ‡‰å£“ç¸®**ï¼šæ˜¯å¦å·²å•Ÿç”¨ Gzip ç­‰å›æ‡‰å£“ç¸®æ©Ÿåˆ¶ï¼Ÿ

---

### 6.2 å®‰å…¨æ€§è©•ä¼°

**å®‰å…¨æª¢æŸ¥æ¸…å–®ï¼š**
- [ ] è¼¸å…¥é©—è­‰ï¼ˆé˜²æ­¢æ³¨å…¥æ”»æ“Šï¼‰
- [ ] SQL æ³¨å…¥é˜²è­·ï¼ˆä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢ï¼‰
- [ ] XSS é˜²è­·ï¼ˆè¼¸å‡ºç·¨ç¢¼ï¼‰
- [ ] CSRF é˜²è­·ï¼ˆToken é©—è­‰ï¼‰
- [ ] æˆæ¬Šæª¢æŸ¥ (Authorization Check)
- [ ] é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰
- [ ] æ•æ„Ÿè³‡æ–™åŠ å¯†
- [ ] HTTPS å¼·åˆ¶ä½¿ç”¨

**å®‰å…¨é¢¨éšªï¼š**
- [å¾…è£œå……ï¼šå·²è­˜åˆ¥çš„å®‰å…¨é¢¨éšª]

---

### 6.3 éŒ¯èª¤è™•ç†ç­–ç•¥

**éŒ¯èª¤è™•ç†åŸå‰‡ï¼š**
- æ‰€æœ‰éŒ¯èª¤éƒ½æ‡‰è¿”å›æ¨™æº–æ ¼å¼
- æ•æ„Ÿè³‡è¨Šä¸æ‡‰æš´éœ²åœ¨éŒ¯èª¤è¨Šæ¯ä¸­
- ç³»çµ±éŒ¯èª¤æ‡‰è¨˜éŒ„æ—¥èªŒ

**ç•°å¸¸é¡å‹**ï¼š
- `[ExceptionType]` - [å¾…è£œå……ï¼šè™•ç†æ–¹å¼]

**éŒ¯èª¤è™•ç†ç¯„ä¾‹**ï¼š
```csharp
try
{
    // æ¥­å‹™é‚è¼¯
}
catch (WebException ex)
{
    var msg = $"å¤–éƒ¨æœå‹™ç•°å¸¸ï¼š{ex.Message}";
    this.Logger.Error(msg);
    throw new ServiceException(msg, ex);
}
catch (Exception ex)
{
    this.Logger.Error(ex.ToString());
    throw;
}
```

**æ—¥èªŒè¨˜éŒ„**ï¼š
- [å¾…è£œå……ï¼šæ—¥èªŒè¨˜éŒ„ç­–ç•¥]

---

## 7. ğŸ“‹ å“è³ªæª¢æŸ¥æ¸…å–® (Quality Checklist)

### â­ åŸºç¤æ¡†æ¶ç´š (Foundation Level)
- [ ] **1.1 ğŸ“‚ åˆ†ææª”æ¡ˆè³‡è¨Š**ï¼šè‡³å°‘ä¸€å€‹è¢«åˆ†æçš„æª”æ¡ˆè·¯å¾‘å·²å¡«å¯«ã€‚
- [ ] **3.1 API åŸºæœ¬è³‡è¨Š**ï¼šç«¯é»å®šç¾©èˆ‡èªè­‰æˆæ¬Šæ–¹å¼å·²å¡«å¯«å®Œæ•´ã€‚
- [ ] **3.2 è«‹æ±‚è¦æ ¼**ï¼šè·¯å¾‘ã€æŸ¥è©¢ã€ä¸»é«”ç­‰è«‹æ±‚è¦æ ¼å·²å®šç¾©ã€‚
- [ ] **3.3 å›æ‡‰è¦æ ¼**ï¼šæˆåŠŸèˆ‡éŒ¯èª¤çš„å›æ‡‰çµæ§‹çš†å·²å®šç¾©ã€‚

### â­â­ æ ¸å¿ƒé‚è¼¯ç´š (Core Logic Level)
- [ ] **1.2 ğŸ“¦ ä¾è³´é—œä¿‚**ï¼šå¾Œç«¯ä¾è³´é—œä¿‚è¡¨å·²å¡«å¯«ã€‚
- [ ] **3.4.0 æ ¸å¿ƒ Controller æ–¹æ³•**ï¼šController çš„æ ¸å¿ƒæ–¹æ³•ç¨‹å¼ç¢¼å·²è²¼ä¸Šã€‚
- [ ] **3.4.1 æ ¸å¿ƒæµç¨‹**ï¼šæ¥­å‹™é‚è¼¯çš„ Mermaid æµç¨‹åœ–å·²ç¹ªè£½å®Œæˆã€‚
- [ ] **3.5 è³‡æ–™æ¨¡å‹è½‰æ›**ï¼šDTO èˆ‡æ¥­å‹™æ¨¡å‹ä¹‹é–“çš„è½‰æ›é‚è¼¯å·²èªªæ˜ã€‚

### â­â­â­ æ•´åˆåˆ†æç´š (Integration Analysis Level)
- [ ] **3.4.2 è³‡æ–™å­˜å–å±¤èª¿ç”¨**ï¼šæ‰€æœ‰ Repository/DAL çš„èª¿ç”¨çš†å·²åˆ—è¡¨èªªæ˜ã€‚
- [ ] **3.4.3 å…¶ä»–æœå‹™èª¿ç”¨**ï¼šæ‰€æœ‰å…§éƒ¨æœå‹™çš„èª¿ç”¨çš†å·²åˆ—è¡¨èªªæ˜ã€‚
- [ ] **3.6 å¿«å–ç­–ç•¥åˆ†æ**ï¼šå¾Œç«¯çš„å¿«å–æ©Ÿåˆ¶ã€Key æ ¼å¼ã€éæœŸç­–ç•¥çš†å·²è©³ç´°æè¿°ã€‚
- [ ] **4. å‰ç«¯èª¿ç”¨å°è£**ï¼šå‰ç«¯ Service çš„å°è£ã€éŒ¯èª¤è™•ç†ã€å¿«å–ç­–ç•¥çš†å·²æä¾›ç¨‹å¼ç¢¼ç¯„ä¾‹ã€‚

### â­â­â­â­ æ¶æ§‹å“è³ªç´š (Architecture Quality Level)
- [ ] **5.2 æ¸¬è©¦æ¡ˆä¾‹**ï¼šæ­£å¸¸èˆ‡ç•°å¸¸æµç¨‹çš„æ¸¬è©¦æ¡ˆä¾‹çš†å·²å®šç¾©ã€‚
- [ ] **6.1 æ•ˆèƒ½è€ƒé‡**ï¼šæ•ˆèƒ½æª¢æŸ¥æ¸…å–®å·²å®Œæˆè©•ä¼°ã€‚
- [ ] **6.2 å®‰å…¨æ€§è©•ä¼°**ï¼šå®‰å…¨æ€§æª¢æŸ¥æ¸…å–®å·²å®Œæˆè©•ä¼°ã€‚
- [ ] **6.3 éŒ¯èª¤è™•ç†ç­–ç•¥**ï¼šå¾Œç«¯çš„éŒ¯èª¤è™•ç†åŸå‰‡ã€ç¯„ä¾‹èˆ‡æ—¥èªŒç­–ç•¥çš†å·²èªªæ˜ã€‚

---

**ç•¶å‰å“è³ªç­‰ç´š**ï¼šâ­ åŸºç¤æ¡†æ¶ (0%)

