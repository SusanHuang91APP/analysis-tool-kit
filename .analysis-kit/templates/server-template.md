# __NAME__ - Server Analysis

---

## 1. ðŸ“ æ ¸å¿ƒæ‘˜è¦èˆ‡ä¾è³´ (Core Summary & Dependencies)

### 1.1 ðŸ“‚ åˆ†æžæª”æ¡ˆè³‡è¨Š (Analyzed Files)

| æª”æ¡ˆè·¯å¾‘ |
|---------|
| [å¾…è£œå……ï¼šè¢«åˆ†æžçš„åŽŸå§‹æª”æ¡ˆå®Œæ•´è·¯å¾‘] |

### 1.2 ðŸ“¦ ä¾è³´é—œä¿‚ (Dependencies)

| é¡žåž‹ | åç¨± | ç”¨é€” | æª”æ¡ˆé€£çµ |
|------|------|------|----------|
| Feature | [åŠŸèƒ½åç¨±] | [åŠŸèƒ½ç”¨é€”] | [åˆ†æžæ–‡ä»¶é€£çµ] |
| API | [APIåç¨±] | [APIç”¨é€”] | [åˆ†æžæ–‡ä»¶é€£çµ] |
| Service | [æœå‹™åç¨±] | [æœå‹™ç”¨é€”] | [åˆ†æžæ–‡ä»¶é€£çµ] |
| Request Pipeline | [ç®¡ç·šå…ƒä»¶] | [å…ƒä»¶ç”¨é€”] | [åˆ†æžæ–‡ä»¶é€£çµ] |

---

## 2. ðŸ“‹ åˆ†æžæŒ‡å¼• (Analysis Guidelines)

**åˆ†æžç›®æ¨™ï¼š**
åˆ†æžå¾Œç«¯è«‹æ±‚è™•ç†å‡½å¼çš„å®Œæ•´æ¥­å‹™é‚è¼¯ã€‚å°ˆæ³¨ï¼šè·¯ç”±èˆ‡åƒæ•¸ã€æ¥­å‹™é‚è¼¯ã€æœå‹™èª¿ç”¨ã€è³‡æ–™è™•ç†ã€ä¾è³´è¿½è¹¤ã€æ•ˆèƒ½èˆ‡å®‰å…¨ã€‚

**æ ¸å¿ƒè¦å‰‡ï¼š**
- ç« ç¯€çµæ§‹ä¸è®Šï¼šç¦æ­¢æ–°å¢žæˆ–åˆªé™¤é è¨­ç« ç¯€
- ä¾†æºæª”æ¡ˆé™å®šï¼šåªåˆ†æž 1.1 ç¯€åˆ—å‡ºçš„æª”æ¡ˆ
- ä¾è³´è¨»è¨˜ï¼šæœªåˆ†æžçš„ä¾è³´è¨˜éŒ„åœ¨ 1.2 ç¯€
- ç¨‹å¼ç¢¼çœŸå¯¦æ€§ï¼šç¦æ­¢ä½¿ç”¨ `...` çœç•¥æˆ–ç·¨é€ å…§å®¹
- å“è³ªæ¸…å–®ä¸è®Šï¼šåƒ…æ›´æ–°å‹¾é¸ç‹€æ…‹ `[ ]` -> `[x]`

---

## 3. ç«¯é»žå®šç¾©èˆ‡è·¯ç”± (Endpoint Definition & Routing)

### 3.1 è™•ç†å‡½å¼å®šç¾© (Handler Definition)

**è™•ç†å‡½å¼ç°½å**ï¼š
```js
// æ¦‚å¿µæ€§å½ä»£ç¢¼
// [è£é£¾å™¨/ä¸­ä»‹è»Ÿé«”ï¼Œä¾‹å¦‚ï¼šæŽˆæ¬Šã€è·¯ç”±]
function [è™•ç†å‡½å¼åç¨±](request, response) {
  // ... å‡½å¼å¯¦ä½œ ...
}
```

**é—œéµè³‡è¨Š**ï¼š
- **å›žå‚³åž‹åˆ¥**ï¼š[å¾…è£œå……ï¼šä¾‹å¦‚ View, JSON, XML, Redirection ç­‰]
- **å‡½å¼åç¨±**ï¼š[å¾…è£œå……]
- **åƒæ•¸åˆ—è¡¨**ï¼š[å¾…è£œå……ï¼šåƒæ•¸åç¨±ã€ä¾†æº (ä¾‹å¦‚ï¼šrequest body, query params)ã€åž‹åˆ¥]

---

### 3.2 è·¯ç”±è³‡è¨Š (Routing Information)

**è·¯ç”±é…ç½®**ï¼š
- **HTTP Method**ï¼š[å¾…è£œå……]
- **è·¯ç”±æ¨¡å¼**ï¼š[å¾…è£œå……]
- **URL ç¯„ä¾‹**ï¼š[å¾…è£œå……ï¼šå®Œæ•´çš„ URL ç¯„ä¾‹]
- **æŸ¥è©¢åƒæ•¸**ï¼š[å¾…è£œå……ï¼šQueryString åƒæ•¸èªªæ˜Ž]

---

### 3.3 æŽˆæ¬Šèˆ‡ä¸­ä»‹è»Ÿé«” (Authorization & Middleware)

[å¾…è£œå……ï¼šèªªæ˜Žå¥—ç”¨çš„è£é£¾å™¨/ä¸­ä»‹è»Ÿé«”åŠå…¶ç”¨é€”]

**å¥—ç”¨çš„è£é£¾å™¨/ä¸­ä»‹è»Ÿé«”ï¼š**
- `[Middleware/Decorator Name]` - [å¾…è£œå……]
- `[Middleware/Decorator Name (Order = N)]` - [å¾…è£œå……]

---

## 4. æ¥­å‹™é‚è¼¯åˆ†æž (Business Logic Analysis)

### 4.1 æ ¸å¿ƒæµç¨‹ (Core Flow)

[å¾…è£œå……ï¼šèªªæ˜Žè™•ç†å‡½å¼çš„ä¸»è¦æ¥­å‹™é‚è¼¯æ­¥é©Ÿ]

**åŸ·è¡Œæ­¥é©Ÿï¼š**
1. [å¾…è£œå……]
2. [å¾…è£œå……]
3. [å¾…è£œå……]

**æµç¨‹åœ–ï¼š**
```mermaid
graph TD
    A[é–‹å§‹] --> B[æ­¥é©Ÿ1]
    B --> C[æ­¥é©Ÿ2]
    C --> D{åˆ¤æ–·æ¢ä»¶}
    D -->|æ˜¯| E[è·¯å¾‘A]
    D -->|å¦| F[è·¯å¾‘B]
    E --> G[çµæŸ]
    F --> G
```

---

### 4.2 æœå‹™èª¿ç”¨ (Service Calls)

[å¾…è£œå……ï¼šèªªæ˜Žèª¿ç”¨çš„æœå‹™æ–¹æ³•]

| æœå‹™åç¨± | æ–¹æ³•åç¨± | ç”¨é€” | åƒæ•¸ | å›žå‚³å€¼ |
|---------|---------|------|------|--------|
| [æœå‹™å] | [æ–¹æ³•å] | [å¾…è£œå……] | [å¾…è£œå……] | [å¾…è£œå……] |

**ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼š**
```js
// å–å¾—æœƒå“¡è³‡æ–™
const member = memberService.getMember(memberId);

// é©—è­‰æ¬Šé™
const hasPermission = authService.checkPermission(member.id, shop.id);
```

---

### 4.3 è³‡æ–™è™•ç† (Data Processing)

[å¾…è£œå……ï¼šèªªæ˜Žè³‡æ–™é©—è­‰ã€è½‰æ›ã€æŒä¹…åŒ–é‚è¼¯]

**è³‡æ–™é©—è­‰ï¼š**
- [å¾…è£œå……]

**è³‡æ–™è½‰æ›ï¼š**
- [å¾…è£œå……]

**è³‡æ–™æŒä¹…åŒ–ï¼š**
- [å¾…è£œå……]

---

### 4.4 è¦–åœ–è³‡æ–™è¨­å®š (View Data Setup)

[å¾…è£œå……ï¼šèªªæ˜Žå‚³éžçµ¦ View/Template çš„è³‡æ–™]

**è¦–åœ–è³‡æ–™ï¼š**
```js
view.setData({
  propertyName: value // [å¾…è£œå……]
});
```

---

## 5. æž¶æ§‹èˆ‡å“è³ªåˆ†æž (Architecture & Quality Analysis)

### 5.1 éŒ¯èª¤è™•ç† (Error Handling)
[å¾…è£œå……ï¼šç•°å¸¸è™•ç†ç­–ç•¥ã€éŒ¯èª¤å›žæ‡‰æ©Ÿåˆ¶]

**ç•°å¸¸é¡žåž‹**ï¼š
- `[ExceptionType]` - [å¾…è£œå……ï¼šè™•ç†æ–¹å¼]

**éŒ¯èª¤å›žæ‡‰ (å½ä»£ç¢¼)**ï¼š
```js
try {
  // æ¥­å‹™é‚è¼¯
} catch (error) {
  // è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ
  logger.error(error);
  // å›žå‚³éŒ¯èª¤é é¢æˆ– JSON å›žæ‡‰
  response.status(500).render("ErrorView", { message: error.message });
}
```

---

### 5.2 å®‰å…¨æ€§åˆ†æž (Security Analysis)
[å¾…è£œå……ï¼šå®‰å…¨æ€§æª¢æŸ¥é …ç›®]

**å®‰å…¨æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] è¼¸å…¥é©—è­‰ (Input Validation)
- [ ] SQL æ³¨å…¥é˜²è­· (SQL Injection Prevention)
- [ ] XSS é˜²è­· (Cross-Site Scripting Prevention)
- [ ] CSRF é˜²è­· (Cross-Site Request Forgery Prevention)
- [ ] æŽˆæ¬Šæª¢æŸ¥ (Authorization Check)
- [ ] æ•æ„Ÿè³‡æ–™è™•ç† (Sensitive Data Handling)

**å·²çŸ¥å®‰å…¨æŽªæ–½**ï¼š
- [å¾…è£œå……ï¼šå·²å¯¦ä½œçš„å®‰å…¨æ©Ÿåˆ¶]

**æ½›åœ¨é¢¨éšª**ï¼š
- [å¾…è£œå……ï¼šéœ€è¦æ³¨æ„çš„å®‰å…¨é¢¨éšª]

---

### 5.3 ç›¸ä¾æ€§åˆ†æž (Dependency Analysis)
[å¾…è£œå……ï¼šæ­¤è™•ç†å‡½å¼ä¾è³´çš„æœå‹™ã€å…ƒä»¶ã€å¤–éƒ¨ API]

**æ³¨å…¥çš„æœå‹™**ï¼š
- `serviceName` - [å¾…è£œå……ï¼šæœå‹™ç”¨é€”]

**å¤–éƒ¨ API èª¿ç”¨**ï¼š
- [å¾…è£œå……ï¼šç¬¬ä¸‰æ–¹ APIã€å…§éƒ¨å¾®æœå‹™]

**è³‡æ–™åº«å­˜å–**ï¼š
- [å¾…è£œå……ï¼šå­˜å–çš„è³‡æ–™è¡¨ã€Repository/ORM]

---

## 6. ðŸ“‹ å“è³ªæª¢æŸ¥æ¸…å–® (Quality Checklist)

### â­ åŸºç¤Žæ¡†æž¶ç´š (Foundation Level)
- [ ] **1.1 ðŸ“‚ åˆ†æžæª”æ¡ˆè³‡è¨Š**ï¼šåˆ†æžçš„æª”æ¡ˆè·¯å¾‘å·²å¡«å¯«ã€‚
- [ ] **3.1 è™•ç†å‡½å¼å®šç¾©**ï¼šè™•ç†å‡½å¼ç°½åå·²æä¾›ã€‚
- [ ] **3.2 è·¯ç”±è³‡è¨Š**ï¼šè·¯ç”±é…ç½®å·²å¡«å¯«ã€‚

### â­â­ æ ¸å¿ƒé‚è¼¯ç´š (Core Logic Level)
- [ ] **3.3 æŽˆæ¬Šèˆ‡ä¸­ä»‹è»Ÿé«”**ï¼šæ‰€æœ‰å¥—ç”¨çš„è£é£¾å™¨/ä¸­ä»‹è»Ÿé«”çš†å·²åˆ—å‡ºä¸¦èªªæ˜Žã€‚
- [ ] **4.1 æ ¸å¿ƒæµç¨‹**ï¼šæ¥­å‹™é‚è¼¯çš„åŸ·è¡Œæ­¥é©Ÿèˆ‡ Mermaid æµç¨‹åœ–çš†å·²å®Œæˆã€‚

### â­â­â­ æ•´åˆåˆ†æžç´š (Integration Analysis Level)
- [ ] **1.2 ðŸ“¦ ä¾è³´é—œä¿‚**ï¼šä¾è³´é—œä¿‚è¡¨å·²åˆæ­¥å¡«å¯«ã€‚
- [ ] **4.2 æœå‹™èª¿ç”¨**ï¼šæœå‹™èª¿ç”¨åˆ—è¡¨å·²å®Œæˆã€‚
- [ ] **4.3 è³‡æ–™è™•ç†**ï¼šè³‡æ–™é©—è­‰ã€è½‰æ›ã€æŒä¹…åŒ–é‚è¼¯å·²èªªæ˜Žã€‚
- [ ] **4.4 è¦–åœ–è³‡æ–™è¨­å®š**ï¼šæ‰€æœ‰å‚³éžçµ¦è¦–åœ–çš„è³‡æ–™çš†å·²åˆ—å‡ºï¼ˆå¦‚é©ç”¨ï¼‰ã€‚

### â­â­â­â­ æž¶æ§‹å“è³ªç´š (Architecture Quality Level)
- [ ] **5.1 éŒ¯èª¤è™•ç†**ï¼šç•°å¸¸è™•ç†ç­–ç•¥å’ŒéŒ¯èª¤å›žæ‡‰æ©Ÿåˆ¶å·²èªªæ˜Žã€‚
- [ ] **5.2 å®‰å…¨æ€§åˆ†æž**ï¼šå®‰å…¨æ€§æª¢æŸ¥æ¸…å–®å·²å®Œæˆè©•ä¼°ã€‚
- [ ] **5.3 ç›¸ä¾æ€§åˆ†æž**ï¼šå®Œæ•´çš„ç›¸ä¾æ€§åˆ†æžï¼ˆæ³¨å…¥æœå‹™ã€å¤–éƒ¨ APIã€è³‡æ–™åº«å­˜å–ï¼‰å·²å®Œæˆã€‚

### â­â­â­â­â­ åŠŸèƒ½å¯¦ä½œå®Œæ•´åˆ†æž (Full Implementation Analysis)
- [ ] **å®Œæ•´æ€§**ï¼šæ–‡ä»¶å…§æ‰€æœ‰ `[å¾…è£œå……]` æ¨™è¨˜çš†å·²ç§»é™¤ï¼Œä¸¦æ›¿æ›ç‚ºåŸºæ–¼åŽŸå§‹ç¢¼çš„çœŸå¯¦åˆ†æžå…§å®¹ã€‚
- [ ] **ç¨‹å¼ç¢¼çœŸå¯¦æ€§**ï¼šæ‰€æœ‰ç¨‹å¼ç¢¼ç‰‡æ®µçš†ç‚ºå°ˆæ¡ˆä¸­çš„**å¯¦éš›ç¨‹å¼ç¢¼**ï¼Œ**é€å­—è¤‡è£½**ï¼Œç„¡ä»»ä½•çœç•¥æˆ–ç·¨é€ ã€‚
- [ ] **æµç¨‹åœ–çœŸå¯¦æ€§**ï¼šæ‰€æœ‰ Mermaid åœ–è¡¨ä¸­çš„å…ƒç´ ï¼ˆå‡½å¼åã€é¡žåˆ¥åã€æµç¨‹æ­¥é©Ÿï¼‰çš†èƒ½åœ¨åŽŸå§‹ç¢¼ä¸­æ‰¾åˆ°æ˜Žç¢ºå°æ‡‰ã€‚
- [ ] **ç„¡æŽ¨æ¸¬æ€§å…§å®¹**ï¼šæ–‡ä»¶ä¸­æ‰€æœ‰åˆ†æžå…§å®¹çš†åŸºæ–¼**å·²æä¾›çš„åŽŸå§‹ç¢¼æª”æ¡ˆ**ï¼Œç„¡ä»»ä½•åŸºæ–¼æŽ¨æ¸¬çš„å…§å®¹ã€‚
- [ ] **ä¾è³´é—œä¿‚æœ€çµ‚ç¢ºèª**ï¼š`1.2 ðŸ“¦ ä¾è³´é—œä¿‚` è¡¨ä¸­çš„æ‰€æœ‰ä¾è³´é …çš†æœ‰å°æ‡‰çš„åˆ†æžæ–‡ä»¶é€£çµï¼Œä¸”ç„¡æ‡¸ç©ºçš„ä¾è³´ã€‚
- [ ] **å¯é©—è­‰æ€§**ï¼šæ‰€æœ‰åˆ†æžçµæžœçš†å¯é€éŽé–±è®€åŽŸå§‹ç¢¼æª”æ¡ˆé€²è¡Œé©—è­‰ï¼Œç„¡æ³•é©—è­‰çš„å…§å®¹å¿…é ˆæ˜Žç¢ºæ¨™è¨˜ç‚ºã€ŒæŽ¨æ¸¬ã€æˆ–ã€Œå»ºè­°ã€ã€‚

---

> **ðŸŽ¯ åˆ†æžå“è³ª**ï¼šâ­ åŸºç¤Žæ¡†æž¶  
> **ðŸ“… é–‹å§‹æ—¥æœŸ**ï¼š__CURRENT_DATE__  
> **ðŸ“… æœ€å¾Œæ›´æ–°**ï¼š__CURRENT_DATE__  
